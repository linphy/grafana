{"version":3,"sources":["../src/space_drawer.js"],"names":["$","SpaceDrawer","canvasArr","ctxArr","width","currentPoint","height","spaceData","style","htmlTarget","canvasSize","resize","target","html","i","canvas","document","getElementById","getContext","drawStyle","p","bp1","bp2","j","data","length","avg","drawFlipRectangle","drawCircle","drawCenterLine","drawPointLine","pointIndex","rotateX","x","y","ctx","lineWidth","strokeStyle","beginPath","moveTo","lineTo","stroke","closePath","sheight","swidth","fillStyle","fillRect","index","arc","circleR","Math","PI","drawCirclePoint","xArr","yArr","xAvg","yAvg","center","scareNumber","m","push","cssText","angelIndex","reDrawPointLine","clearRect","newCurrentPoint","arr","getXY","rx0","ry0","angel","radian","x0","cos","sin","y0"],"mappings":"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","file":"space_drawer.js","sourcesContent":["import $ from 'jquery';\r\n\r\nexport default class SpaceDrawer {\r\n    constructor() {\r\n        this.canvasArr = [];\r\n        this.ctxArr = [];\r\n        this.width = 400;\r\n        this.currentPoint = [];\r\n        this.height = 200;\r\n        this.spaceData = null;\r\n        this.style = null;\r\n    }\r\n\r\n    resize() {\r\n        this.height = this.width / 2;\r\n    }\r\n\r\n    init(htmlTarget, canvasSize) {\r\n        this.resize();\r\n        this.ctxArr = [];\r\n        var target = $(htmlTarget);\r\n        var html = \"<canvas id='mycanvas0'></canvas>\";\r\n        html +=\r\n            \"<div style='z-index:2;margin-top:-205px;margin-left:100px'><canvas id='mycanvas3'></canvas></div>\";\r\n        html += \"<canvas id='mycanvas1'></canvas>\";\r\n        html +=\r\n            \"<div style='z-index:2;margin-top:-205px;margin-left:100px'><canvas id='mycanvas4'></canvas></div>\";\r\n        html += \"<canvas id='mycanvas2'></canvas>\";\r\n        html +=\r\n            \"<div style='z-index:2;margin-top:-205px;margin-left:100px'><canvas id='mycanvas5'></canvas></div>\";\r\n        html +=\r\n            \"<div style='z-index:-1;margin-top:-610px;'><canvas id='mycanvas6'></canvas></div>\";\r\n        html +=\r\n            \"<div style='z-index:-1;margin-top:-610px;'><canvas id='mycanvas7'></canvas></div>\";\r\n        target.html(html);\r\n\r\n        for (var i = 0; i < 8; i++) {\r\n            var canvas = document.getElementById(\"mycanvas\" + i);\r\n            this.canvasArr[i] = canvas;\r\n\r\n            canvas.width = this.width;\r\n            if (i == 3 || i == 4 || i == 5) {\r\n                canvas.width = this.height;\r\n            }\r\n\r\n            if (i <= 5) {\r\n                canvas.height = this.height;\r\n            } else { //6-7是上下水的连线，高度等于宽度\r\n                canvas.height = this.height * 3;\r\n            }\r\n            this.ctxArr[i] = canvas.getContext(\"2d\");\r\n        }\r\n    }\r\n\r\n    draw(spaceData, drawStyle, p, bp1, bp2) {\r\n        if (p != -1) {\r\n            var i;\r\n\r\n            // 被盘1\r\n            i = bp1 * 2;\r\n            for (var j = 0; j < spaceData.data[i].length; j++) {\r\n                spaceData.data[i][j] -= spaceData.data[p * 2][j];\r\n            }\r\n            spaceData.avg[i] -= spaceData.avg[p * 2];\r\n            i++;\r\n            for (var j = 0; j < spaceData.data[i].length; j++) {\r\n                spaceData.data[i][j] -= spaceData.data[p * 2 + 1][j];\r\n            }\r\n            spaceData.avg[i] -= spaceData.avg[p * 2 + 1];\r\n\r\n            // 被盘2\t\t\t\r\n            i = bp2 * 2;\r\n            for (var j = 0; j < spaceData.data[i].length; j++) {\r\n                spaceData.data[i][j] -= spaceData.data[p * 2][j];\r\n            }\r\n            spaceData.avg[i] -= spaceData.avg[p * 2];\r\n            i++;\r\n            for (var j = 0; j < spaceData.data[i].length; j++) {\r\n                spaceData.data[i][j] -= spaceData.data[p * 2 + 1][j];\r\n            }\r\n            spaceData.avg[i] -= spaceData.avg[p * 2 + 1];\r\n\r\n            // 盘\r\n            i = p * 2;\r\n            for (var j = 0; j < spaceData.data[i].length; j++) {\r\n                spaceData.data[i][j] = spaceData.avg[i];\r\n            }\r\n\r\n            i++;\r\n            for (var j = 0; j < spaceData.data[i].length; j++) {\r\n                spaceData.data[i][j] = spaceData.avg[i];\r\n            }\r\n        }\r\n\r\n\r\n        this.spaceData = spaceData;\r\n        this.style = drawStyle;\r\n\r\n        //1、正方形&点\r\n        for (var i = 0; i < 3; i++) {\r\n            this.drawFlipRectangle(this.width / 2, 100, this.ctxArr[i]);\r\n        }\r\n\r\n        //2、根据半径画圆\r\n        for (var i = 3; i < 6; i++) {\r\n            this.drawCircle(this.ctxArr[i], i - 3);\r\n        }\r\n\r\n        //4、画每个中心点连线（固定）\r\n        this.drawCenterLine();\r\n\r\n        //5、画上下水每个点的连线（变化）\r\n        this.drawPointLine(this.spaceData.drawStyle.pointIndex);\r\n\r\n        this.rotateX();\r\n    }\r\n\r\n    drawFlipRectangle(x, y, ctx) {\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = 'white';\r\n        ctx.beginPath();\r\n        var height = 100;\r\n        var width = 100;\r\n        ctx.moveTo(x - 100, y); //左中\r\n        ctx.lineTo(x + 100, y); //右中\r\n        ctx.lineTo(x + 100, y - 100); //右上\r\n        ctx.lineTo(x - 100, y - 100); //左上\r\n        ctx.lineTo(x - 100, y + 100); //左下\r\n        ctx.lineTo(x + 100, y + 100); //右下\r\n        ctx.lineTo(x + 100, y);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n\r\n        ctx.beginPath();\r\n        ctx.moveTo(x, y + height);\r\n        ctx.lineTo(x, y - height);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n\r\n        var sheight = height / 5;\r\n        var swidth = width / 5;\r\n        var length = width / 5;\r\n        ctx.fillStyle = \"green\"; /*设置填充颜色*/\r\n        for (var i = 0; i < 4; i++) {\r\n            for (var j = 0; j < 4; j++) {\r\n                ctx.fillRect(x + swidth * (i + 1), y - sheight * (j + 1), 2, 2); //右上\r\n                ctx.fillRect(x - swidth * (i + 1), y - sheight * (j + 1), 2, 2); //左上\r\n                ctx.fillRect(x - swidth * (i + 1), y + sheight * (j + 1), 2, 2); //左下\r\n                ctx.fillRect(x + swidth * (i + 1), y + sheight * (j + 1), 2, 2); //右上\r\n            }\r\n        }\r\n    }\r\n\r\n    /** 画圆 */\r\n    drawCircle(ctx, index) {\r\n        ctx.strokeStyle = 'white';\r\n        ctx.lineWidth = 1;\r\n        ctx.beginPath();\r\n        ctx.arc(this.height / 2, 100, this.style.circleR, 0, Math.PI * 2, true);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n\r\n        //3、每个圆圈里面的点\r\n        this.drawCirclePoint(ctx, index);\r\n    }\r\n\r\n    /** 画中的点 */\r\n    drawCirclePoint(ctx, index) {\r\n        ctx.lineWidth = 0.1;\r\n        ctx.strokeStyle = 'white';\r\n        ctx.beginPath();\r\n\r\n        var xArr = this.spaceData.data[index * 2]; //x\r\n        var yArr = this.spaceData.data[index * 2 + 1]; //y\r\n        var xAvg = this.spaceData.avg[index * 2];\r\n        var yAvg = this.spaceData.avg[index * 2 + 1];\r\n\r\n        var center = this.height / 2;\r\n        //根据圆的半径，反推放大系数(45是默认圆半径)\r\n        var scareNumber = (this.style.circleR - 45) / 5 * 0.1 + 1;\r\n        for (var j = 0; j < xArr.length - 1; j++) {\r\n            if (yArr.length < j) {\r\n                break;\r\n            }\r\n            ctx.moveTo(center - (xArr[j] - xAvg) * scareNumber, center + (yArr[j] -\r\n                yAvg) * scareNumber); //右中\r\n            ctx.lineTo(center - (xArr[j + 1] - xAvg) * scareNumber, center + (yArr[j +\r\n                1] - yAvg) * scareNumber); //左中\r\n            ctx.stroke();\r\n        }\r\n        ctx.closePath()\r\n    }\r\n\r\n    drawPointLine(j) {\r\n        var ctx = this.ctxArr[7];\r\n        var currentPoint = [];\r\n\r\n        //根据圆的半径，反推放大系数(45是默认圆半径)\r\n        var scareNumber = (this.style.circleR - 45) / 5 * 0.1 + 1;\r\n        var x = this.width / 2;\r\n\r\n        for (var m = 0; m < this.spaceData.data.length; m++) { //0,2,4\r\n            var xArr = this.spaceData.data[m];\r\n            var yArr = this.spaceData.data[m + 1];\r\n            if (m == 0) {\r\n                currentPoint.push([x - (xArr[j] - this.spaceData.avg[0]) * scareNumber,\r\n                    100 + (yArr[j] - this.spaceData.avg[1]) * scareNumber\r\n                ]);\r\n            } else if (m == 2) {\r\n                currentPoint.push([x - (xArr[j] - this.spaceData.avg[2]) * scareNumber,\r\n                    305 + (yArr[j] - this.spaceData.avg[3]) * scareNumber\r\n                ]);\r\n            } else if (m == 4) {\r\n                currentPoint.push([x - (xArr[j] - this.spaceData.avg[4]) * scareNumber,\r\n                    510 + (yArr[j] - this.spaceData.avg[5]) * scareNumber\r\n                ]);\r\n            }\r\n            m = m + 1;\r\n        }\r\n\r\n        ctx.strokeStyle = 'red';\r\n        ctx.lineWidth = 1;\r\n        ctx.beginPath();\r\n        ctx.moveTo(currentPoint[0][0], currentPoint[0][1]);\r\n        ctx.lineTo(currentPoint[1][0], currentPoint[1][1]);\r\n        ctx.lineTo(currentPoint[2][0], currentPoint[2][1]);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n\r\n        this.currentPoint = currentPoint;\r\n    }\r\n\r\n    drawCenterLine() {\r\n        var ctx = this.ctxArr[6];\r\n        ctx.strokeStyle = 'blue';\r\n        ctx.lineWidth = 1;\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.width / 2, 100 - 5); //第1个中心点\r\n        ctx.lineTo(this.width / 2, 305); //第2个中心点\r\n        ctx.lineTo(this.width / 2, 505); //第3个中心点\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n    }\r\n\r\n    //图像倾斜旋转\r\n    rotateX() {\r\n        for (var i = 0; i < 6; i++) {\r\n            //第一步：水平方向倾斜，第二步：x轴旋转\r\n            this.canvasArr[i].style.cssText = \" -webkit-transform:  skew(\" + this.style\r\n                .angelIndex + \"deg, 0deg) rotateX(\" + this.style.angelIndex + \"deg)\";\r\n        }\r\n        this.reDrawPointLine();\r\n    }\r\n\r\n    reDrawPointLine() {\r\n        var ctx = this.ctxArr[7];\r\n        ctx.clearRect(0, 0, this.width, this.height * 3);\r\n\r\n        ctx.strokeStyle = 'red';\r\n        ctx.lineWidth = 1;\r\n        ctx.beginPath();\r\n        var newCurrentPoint = [];\r\n        var currentPoint = this.currentPoint;\r\n        for (var i = 0; i < currentPoint.length; i++) {\r\n            //水平方向倾斜反推\r\n            //var arr = getXY(currentPoint[i][0], currentPoint[i][1], width/2, (2*i+1) * 100);\r\n\r\n            //X轴旋转反推\r\n            var arr = this.getXY(currentPoint[i][0], currentPoint[i][1], currentPoint[i]\r\n                [0], (2 * i + 1) * 100);\r\n            arr[1] = arr[1] + i * 5; //上下每个canvas有5像素的间隔\r\n            newCurrentPoint.push(arr);\r\n        }\r\n        ctx.moveTo(newCurrentPoint[0][0], newCurrentPoint[0][1]);\r\n        ctx.lineTo(newCurrentPoint[1][0], newCurrentPoint[1][1]);\r\n        ctx.lineTo(newCurrentPoint[2][0], newCurrentPoint[2][1]);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n    }\r\n\r\n    //直角坐标系的旋转公式\r\n    //x0= (x - rx0)*cos(a) - (y - ry0)*sin(a) + rx0 ;\r\n    //y0= (x - rx0)*sin(a) + (y - ry0)*cos(a) + ry0 ;\r\n    getXY(x, y, rx0, ry0) {\r\n        var angel = 0 - this.style.angelIndex;\r\n        var radian = (2 * Math.PI / 360) * angel;\r\n        var x0 = (x - rx0) * Math.cos(radian) - (y - ry0) * Math.sin(radian) + rx0;\r\n        var y0 = (x - rx0) * Math.sin(radian) + (y - ry0) * Math.cos(radian) + ry0;\r\n        return [x0, y0];\r\n    }\r\n}\r\n"]}