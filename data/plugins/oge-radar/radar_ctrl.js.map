{"version":3,"sources":["../src/radar_ctrl.js"],"names":["MetricsPanelCtrl","moment","_","TimeSeries","echarts","$","panelDefaults","maxArr","targetStr","EchartsCtrl","$scope","$injector","$rootScope","defaults","panel","targetArr1","target","dataArr","shapeOption","name","value","maxArrOption","events","on","onInitEditMode","bind","onDataReceived","Arr1","Arr2","Arr3","Arr4","i","dataList","length","threshold","push","datapoints","obj1","max","undefined","addEditorTab","render","scope","elem","attrs","ctrl","getArr","gettargetStr","obj","find","myChart","init","lineStyle","normal","width","opacity","option","backgroundColor","legend","data","itemGap","textStyle","color","tooltip","radar","splitNumber","shape","indicator","splitLine","reverse","splitArea","show","axisLine","series","type","areaStyle","setOption","templateUrl"],"mappings":"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","file":"radar_ctrl.js","sourcesContent":["import {MetricsPanelCtrl} from 'app/plugins/sdk';\r\nimport moment from 'moment';\r\nimport _ from 'lodash';\r\nimport TimeSeries from 'app/core/time_series';\r\nimport './css/clock-panel.css!';\r\nimport echarts from 'vendor/echarts/echarts.min.js';\r\nimport $ from 'jquery';\r\n\r\nvar panelDefaults = {\r\n\tmaxArr:100,\r\n\ttargetStr:[],\r\n}\r\nexport class EchartsCtrl extends MetricsPanelCtrl {\r\n  constructor($scope, $injector, $rootScope) {\r\n    super($scope, $injector);\r\n\tthis.$rootScope = $rootScope;\r\n\t_.defaults(this.panel, panelDefaults);\r\n\tvar targetArr1 = [];\r\n\tvar target = [];\r\n\tvar dataArr=[];\r\n\tvar shapeOption=[{name:'多边型',value:'polygon'},\r\n\t\t\t\t\t{name:'圆型',value:'circle'}];\r\n\tvar maxArrOption;\r\n\tthis.panel.shapeOption = shapeOption;\r\n\tthis.panel.target = target;\r\n\tthis.panel.targetArr1 = targetArr1;\r\n\tthis.panel.maxArrOption = maxArrOption;\r\n\tthis.panel.dataArr = dataArr;\r\n\tthis.events.on('init-edit-mode', this.onInitEditMode.bind(this));\r\n\tthis.events.on('data-received', this.onDataReceived.bind(this));\r\n  } \r\n\r\n\tgetArr(){\r\n\tvar targetArr1=[];\r\n\tvar dataArr=[];\r\n\tvar Arr1 =[];\r\n\tvar Arr2 =[];\r\n\tvar Arr3 =[];\r\n\tvar Arr4 =[];\r\n\t/*for (var i=0;i<this.dataList.length;i++){\r\n\t\tif(this.panel.targets[i].target.indexOf('HP1') != -1){//判断targetStr的值来分组\r\n\t\t\tArr1.push(this.dataList[i].datapoints[0][0]);\r\n\t\t\tvar obj1 = {name:this.dataList[i].target,max:this.panel.maxArr};\r\n\t\t\ttargetArr1.push(obj1);\r\n\t\t}\r\n\t\telse if(this.panel.targets[i].target.indexOf('HP2') != -1){\r\n\t\t\tArr2.push(this.dataList[i].datapoints[0][0])\r\n\t\t}\r\n\t\telse if(this.panel.targets[i].target.indexOf('HP3') != -1){\r\n\t\t\tArr3.push(this.dataList[i].datapoints[0][0])\r\n\t\t}\r\n\t\telse if (this.panel.targets[i].target.indexOf('HP4') != -1){\r\n\t\t\tArr4.push(this.dataList[i].datapoints[0][0])\r\n\t\t}//按机组号把data数据分组\r\n\t}*/\r\n\tfor (var i=0;i<this.dataList.length;i++){\r\n\t\tif(this.panel.threshold[i] == '1'){//判断targetStr的值来分组\r\n\t\t\tArr1.push(this.dataList[i].datapoints[0][0]);\r\n\t\t\tvar obj1 = {name:this.dataList[i].target,max:this.panel.maxArr};\r\n\t\t\ttargetArr1.push(obj1);\r\n\t\t}\r\n\t\telse if(this.panel.threshold[i] == '2'){\r\n\t\t\tArr2.push(this.dataList[i].datapoints[0][0])\r\n\t\t}\r\n\t\telse if(this.panel.threshold[i] == '3'){\r\n\t\t\tArr3.push(this.dataList[i].datapoints[0][0])\r\n\t\t}\r\n\t\telse if (this.panel.threshold[i] == '4'){\r\n\t\t\tArr4.push(this.dataList[i].datapoints[0][0])\r\n\t\t}//按机组号把data数据分组\r\n\t}\r\n\tthis.panel.targetArr1 = targetArr1;\r\n\tthis.panel.dataArr = [Arr1,Arr2,Arr3,Arr4];\r\n\t}\r\n\t\r\n\tgettargetStr(){\r\n\t\tthis.panel.target=[];\r\n\t\t\tfor (var i=0;i<this.panel.targetStr.length;i++){\r\n\t\t\t\tif(this.panel.targetStr[i] == undefined){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\telse\t\r\n\t\t\t\t{this.panel.target.push(this.panel.targetStr[i])\r\n\t\t\t\t}\r\n\t\t}\r\n\t}\r\n\tonInitEditMode() {\r\n    this.addEditorTab('Options', 'public/plugins/oge-radar/editor.html', 2);\r\n  }\r\n  onDataReceived(dataList) {\r\n\tthis.dataList=dataList;\r\n\tthis.render();\r\n  }\r\n\r\n  onRender(){\r\n\t  //nothing\r\n  }\r\n\r\n  link(scope, elem, attrs, ctrl) {\t\r\n\tctrl.events.on('render', function() {\r\n\tctrl.getArr();\r\n\tctrl.gettargetStr();\r\n\tvar obj = elem.find('.echarts-panel');\r\n\tvar myChart = echarts.init(obj[0]);\r\n\tvar lineStyle = {\r\n    normal: {\r\n        width: 1,\r\n        opacity: 0.5\r\n    }\r\n\t};\r\n\tvar option = {\r\n\t\tbackgroundColor: '#0A0A0A',\r\n\t\tlegend: {\r\n\t\t\tdata: ctrl.panel.target,\r\n\t\t\titemGap: 20,\r\n\t\t\ttextStyle: {color: 'rgb(238, 197, 102)'}\r\n\t\t},\r\n\t\ttooltip: {},\r\n\t\tradar: {\r\n        splitNumber: 5,\r\n        shape: ctrl.panel.shape,\r\n        indicator: ctrl.panel.targetArr1,\r\n         name: {\r\n            textStyle: {\r\n                color: 'rgb(238, 197, 102)'\r\n            }\r\n        },\r\n        splitLine: {\r\n            lineStyle: {\r\n                color: [\r\n                    'rgba(238, 197, 102, 0.1)', 'rgba(238, 197, 102, 0.2)',\r\n                    'rgba(238, 197, 102, 0.4)', 'rgba(238, 197, 102, 0.6)',\r\n                    'rgba(238, 197, 102, 0.8)', 'rgba(238, 197, 102, 1)'\r\n                ].reverse()\r\n            }\r\n        },\r\n         splitArea: {\r\n            show: false//分隔线\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: 'rgba(238, 197, 102, 0.5)'\r\n            }\r\n        }\r\n    },\r\n    series: [{\r\n        name:'这是一个名字' ,\r\n        type: 'radar',\r\n        areaStyle: {\r\n                normal: {\r\n                    opacity: 0.5//图形透明度，为0时不绘图。\r\n                }\r\n            },\r\n        data : [\r\n            {value:ctrl.panel.dataArr[0],name:ctrl.panel.target[0]},\r\n            {value:ctrl.panel.dataArr[1],name:ctrl.panel.target[1]},\r\n\t\t\t{value:ctrl.panel.dataArr[2],name:ctrl.panel.target[2]},\r\n\t\t\t{value:ctrl.panel.dataArr[3],name:ctrl.panel.target[3]}\r\n        ]\r\n    }]\r\n};\r\n\tmyChart.setOption(option);\r\n  });\r\n  }\r\n  \r\n}\r\n\r\nEchartsCtrl.templateUrl = 'module.html';\r\n"]}