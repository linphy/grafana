{"version":3,"sources":["../src/trace_drawer.js"],"names":["$","TraceDrawer","canvasArr","ctxArr","width","currentPoint","height","traceData","style","htmlTarget","canvasSize","target","html","canvas","document","getElementById","canvas_width","getContext","drawStyle","num","new_width","drawFlipRectangle","drawCircle","x","y","ctx","lineWidth","strokeStyle","beginPath","moveTo","lineTo","stroke","closePath","sheight","swidth","length","fillStyle","i","j","fillRect","index","h","arc","circleR","Math","PI","drawCirclePoint","xArr","data","yArr","xAvg","avg","yAvg","center","scareNumber"],"mappings":"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","file":"trace_drawer.js","sourcesContent":["import $ from 'jquery';\r\n\r\nexport default class TraceDrawer {\r\n    constructor() {\r\n        this.canvasArr = [];\r\n        this.ctxArr = [];\r\n        this.width = 200;\r\n        this.currentPoint = [];\r\n        this.height = 200;\r\n        this.traceData = null;\r\n        this.style = null;\r\n    }\r\n\r\n    init(htmlTarget, canvasSize) {\r\n        this.ctxArr = [];\r\n        var target = $(htmlTarget);\r\n        var html = \"<canvas id='\"+htmlTarget+\"mycanvas'></canvas>\";\r\n        target.html(html);\r\n        var canvas = document.getElementById(htmlTarget+\"mycanvas\");\r\n        var canvas_width=target.width()>target.height()?target.height():target.width();\r\n        canvas.width = canvas_width+10;\r\n        canvas.height = canvas_width+10;\r\n        this.ctxArr[0] = canvas.getContext(\"2d\");\r\n    }\r\n\r\n    draw(traceData, drawStyle, htmlTarget) {\r\n        if(!traceData) return;\r\n        this.traceData = traceData;\r\n        this.style = drawStyle;\r\n        var num=0;\r\n        var new_width=$(htmlTarget).width()>$(htmlTarget).height()?$(htmlTarget).height():$(htmlTarget).width();\r\n        //1、正方形&点\r\n        this.drawFlipRectangle(new_width / 2, new_width / 2, this.ctxArr[0]);\r\n            //2、根据半径画圆\r\n        this.drawCircle(this.ctxArr[0], num, new_width);\r\n    }\r\n\r\n    drawFlipRectangle(x, y, ctx) {\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = 'white';\r\n        ctx.beginPath();\r\n\r\n        ctx.moveTo(0, y); //左中\r\n        ctx.lineTo(x*2, y); //右中\r\n        ctx.lineTo(x*2, 0); //右上\r\n        ctx.lineTo(0, 0); //左上\r\n        ctx.lineTo(0, y*2); //左下\r\n        ctx.lineTo(x*2, y*2); //右下\r\n        ctx.lineTo(x*2, y);\r\n\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n\r\n        ctx.beginPath();\r\n        ctx.moveTo(x, y*2);\r\n        ctx.lineTo(x, 0);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n\r\n        var sheight = y / 5;\r\n        var swidth = x / 5;\r\n        var length = x / 5;\r\n        ctx.fillStyle = \"green\"; /*设置填充颜色*/\r\n        for (var i = 0; i < 4; i++) {\r\n            for (var j = 0; j < 4; j++) {\r\n                ctx.fillRect(x + swidth * (i + 1), y - sheight * (j + 1), 2, 2); //右上\r\n                ctx.fillRect(x - swidth * (i + 1), y - sheight * (j + 1), 2, 2); //左上\r\n                ctx.fillRect(x - swidth * (i + 1), y + sheight * (j + 1), 2, 2); //左下\r\n                ctx.fillRect(x + swidth * (i + 1), y + sheight * (j + 1), 2, 2); //右上\r\n            }\r\n        }\r\n    }\r\n\r\n    /** 画圆 */\r\n    drawCircle(ctx, index,h) {\r\n        ctx.strokeStyle = 'white';\r\n        ctx.lineWidth = 1;\r\n        ctx.beginPath();\r\n        ctx.arc(h / 2, h / 2, this.style.circleR, 0, Math.PI * 2, true);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n\r\n        //3、每个圆圈里面的点\r\n        this.drawCirclePoint(ctx, index,h);\r\n    }\r\n\r\n    /** 画中的点 */\r\n    drawCirclePoint(ctx, index, h) {\r\n        ctx.lineWidth = 0.1;\r\n        ctx.strokeStyle = 'white';\r\n        ctx.beginPath();\r\n\r\n        var xArr = this.traceData.data[index * 2]; //x\r\n        var yArr = this.traceData.data[index * 2 + 1]; //y\r\n        var xAvg = this.traceData.avg[index * 2];\r\n        var yAvg = this.traceData.avg[index * 2 + 1];\r\n\r\n        var center = h/2;\r\n        //根据圆的半径，反推放大系数(45是默认圆半径)\r\n        var scareNumber = (this.style.circleR - 45) / 5 * 0.1 + 1;\r\n        for (var j = 0; j < xArr.length - 1; j++) {\r\n            if (yArr.length < j) {\r\n                break;\r\n            }\r\n            ctx.moveTo(center - (xArr[j] - xAvg) * scareNumber, center + (yArr[j] -\r\n                yAvg) * scareNumber); //右中\r\n            ctx.lineTo(center - (xArr[j + 1] - xAvg) * scareNumber, center + (yArr[j +\r\n                1] - yAvg) * scareNumber); //左中\r\n            ctx.stroke();\r\n        }\r\n        ctx.closePath()\r\n    }\r\n}\r\n"]}