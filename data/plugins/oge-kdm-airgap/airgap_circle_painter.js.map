{"version":3,"sources":["../src/airgap_circle_painter.js"],"names":["$","_","AirgapCirclePainter","$cd","size","kksList","config","_config","defaults","rotorIndex","currentIndex","waveName","vars","lineXY","circleInterval","canvases","initCanvases","i","length","push","name","find","each","e","width","height","attributes","value","poleData","paintZZZXY","data","yData","airgapData","sum","min","max","avgGaps","tv_avgGapsInfo","avg","setDealData","paintJXYTC","paintJXCKY","paintDZCKY","paintZZCKY","paintSZXBC","paintWHXBC","paintTDBJH","ctx","WHXBC","getContext","strokeStyle","PaintUtils","drawCircle","ZZCKY","r","dealData","DZCKY","radian","result","statorAngle","Math","PI","x","cos","statorRoundness","y","sin","JXCKY","myBezierEllipse","JXYTC","fillStyle","fill","BezierEllipse","TDBJH","font","dataOuter","position","getxy","fillText","minIndex","maxIndex","newYData","temp","ZZZXY","clearRect","circle","dashLine","fiterData","newPoleData","sinAngle","tempSize","save","translate","rotate","angle","upTempAngle","upRadian","x2","y2","nextTempAngle","nextRadian","x3","y3","beginPath","moveTo","lineTo","stroke","closePath","drawDashLine","restore","SZXBC","coordinateInterval","info","waves","current","rotor","character","infoWaves","infoCurrent","infoRotor","infoCharacter","pop","num","sensorAngles","toFixed","singelAngel","poleIndex","angel","index","JXJD","CJBH","CJJD","JSQX","BYD","PXL","PXJ","CLZXQX","CLZXCJBH","JSZXQXFW","CLZDQX","CLZDCJBH","JSZDQXFW","tempDataOuter","circleData","arc","x1","y1","dashLength","dashLen","undefined","xpos","ypos","numDashes","floor","sqrt","calDataOuterCircleData","tempHeight","quadraticCurveTo","NotUse","fontColor","fontTxt","yStart","txtCtx","canvas","bbox","getBoundingClientRect","left","top","dataIndex","endData","up","tempData","X1","Y1","X2","Y2"],"mappings":"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","file":"airgap_circle_painter.js","sourcesContent":["import $ from 'jquery';\r\nimport _ from 'lodash';\r\n\r\nexport default class AirgapCirclePainter {\r\n  //初始化：canvasSize默认是panel的高度\r\n  constructor($cd, size, kksList, config) {\r\n\r\n    this._config = _.defaults(config, {\r\n      rotorIndex: 0,\r\n      currentIndex: 0\r\n    });\r\n\r\n    this.waveName = [];\r\n    this.vars = {};\r\n    this.lineXY = [];\r\n    this.size = size;\r\n    this.circleInterval = this.size / 12; //每个圆圈之间的间隔像素，12固定，因为总共要画5个圆（一个中心点），可以划分12段\r\n    this.canvases = this.initCanvases(this.size, $cd);\r\n\r\n    for (var i = 0; i < kksList.length; i++) {\r\n      this.waveName.push(kksList[i].name);\r\n    }\r\n  }\r\n\r\n  initCanvases(size, $cd) {\r\n    var canvases = {};\r\n\r\n    $cd.find('canvas').each(function (i, e) {\r\n      e.width = e.height = size;\r\n      canvases[e.attributes.name.value] = e;\r\n    });\r\n\r\n    return canvases;\r\n  }\r\n\r\n  prevRotor() {\r\n    this._config.rotorIndex--;\r\n    if (this._config.rotorIndex <= 0) {\r\n      this._config.rotorIndex = this.poleData.length - 1;\r\n    }\r\n    this.paintZZZXY();\r\n  }\r\n\r\n  nextRotor() {\r\n    this._config.rotorIndex++;\r\n    if (this._config.rotorIndex >= this.poleData.length - 1) {\r\n      this._config.rotorIndex = 0;\r\n    }\r\n    this.paintZZZXY();\r\n  }\r\n\r\n  prevIndex() {\r\n    this._config.currentIndex--;\r\n    if (this._config.currentIndex <= 0) {\r\n      this._config.currentIndex = this.poleData.length - 1;\r\n    }\r\n    this.paintZZZXY();\r\n  }\r\n\r\n  nextIndex() {\r\n    this._config.currentIndex++;\r\n    if (this._config.currentIndex >= this.poleData.length - 1) {\r\n      this._config.currentIndex = 0;\r\n    }\r\n    this.paintZZZXY();\r\n  }\r\n\r\n  draw(data) {\r\n    this.poleData = data.yData;\r\n    this.airgapData = data.airgapData;\r\n\r\n    var sum = 0;\r\n    var min = 100; // 一般最大不超过50\r\n    var max = 0;\r\n    for (var i = 0; i < this.airgapData.avgGaps.length; i++) {\r\n      sum += this.airgapData.avgGaps[i];\r\n      min = _.min([this.airgapData.avgGaps[i], min]);\r\n      max = _.max([this.airgapData.avgGaps[i], max]);\r\n    }\r\n    this.tv_avgGapsInfo = {\r\n      sum: sum,\r\n      min: min,\r\n      max: max,\r\n      avg: sum / this.airgapData.avgGaps.length\r\n    }\r\n\r\n\r\n    //处理磁极数据\r\n    this.setDealData(this.poleData);\r\n\r\n\r\n    // <canvas name=\"JXYTC\">间隙圆填充</canvas>\r\n    // <canvas name=\"ZZZXY\">转子中心圆</canvas>\r\n    // <canvas name=\"CJZSZ\">磁极指示针</canvas>\r\n    // <canvas name=\"JXCKY\">间隙参考圆</canvas>\r\n    // <canvas name=\"DZCKY\">定子参考圆</canvas>\r\n    // <canvas name=\"ZZCKY\">转子参考圆</canvas>\r\n    // <canvas name=\"SZXBC\">十字型标尺</canvas>\r\n    // <canvas name=\"WHXBC\">五环型标尺</canvas>\r\n    // <canvas name=\"TDBJH\">通道标记号</canvas>\r\n\r\n    //坐标轴\r\n\r\n    // // 转子圆\r\n    this.paintJXYTC();\r\n    this.paintZZZXY();\r\n    // this.paintCJZSZ();\r\n    this.paintJXCKY();\r\n    this.paintDZCKY();\r\n    this.paintZZCKY();\r\n    this.paintSZXBC();\r\n    this.paintWHXBC();\r\n    this.paintTDBJH();\r\n\r\n  }\r\n\r\n  // 五环标尺\r\n  paintWHXBC() {\r\n    var ctx = this.canvases.WHXBC.getContext('2d');\r\n    ctx.strokeStyle = \"white\";\r\n    for (var i = 1; i <= 5; i++) {\r\n      PaintUtils.drawCircle(ctx, i * this.circleInterval, this.size / 2);\r\n    }\r\n  }\r\n\r\n  paintZZCKY() {\r\n    var ctx = this.canvases.ZZCKY.getContext('2d');\r\n    //转子参考圆：圆心就是实际圆心;半径就是+X传感器平均气隙\r\n    ctx.strokeStyle = \"green\";\r\n    var r = 3 * this.circleInterval + (this.dealData.avg - this.dealData\r\n        .min) / (this.dealData.max - this.dealData.min) * this.circleInterval /\r\n      3;\r\n    PaintUtils.drawCircle(ctx, r, this.size / 2);\r\n  }\r\n\r\n  //定子参考圆:圆心是定子偏心角和定子偏心算出来的;半径是多个定子气隙平均出来的\r\n  paintDZCKY() {\r\n    var ctx = this.canvases.DZCKY.getContext('2d');\r\n    ctx.strokeStyle = \"green\";\r\n    var radian = this.airgapData.result.statorAngle * Math.PI / 180;\r\n    var x = this.size / 2 - Math.cos(radian) * this.airgapData.result.statorRoundness;\r\n    var y = this.size / 2 - Math.sin(radian) * this.airgapData.result.statorRoundness;\r\n\r\n    // 以四环为基线\r\n    var r = 4 * this.circleInterval + (this.tv_avgGapsInfo.avg -\r\n      this.tv_avgGapsInfo.min) / (this.tv_avgGapsInfo.max - this.tv_avgGapsInfo\r\n      .min) * this.circleInterval;\r\n    PaintUtils.drawCircle(ctx, r, x, y);\r\n  }\r\n\r\n\r\n  paintJXCKY() {\r\n    var ctx = this.canvases.JXCKY.getContext('2d');\r\n    ctx.strokeStyle = \"blue\";\r\n    this.myBezierEllipse(ctx);\r\n  }\r\n\r\n  paintJXYTC() {\r\n    var ctx = this.canvases.JXYTC.getContext('2d');\r\n    ctx.fillStyle = 'yellow';\r\n    this.myBezierEllipse(ctx);\r\n    ctx.fill(); // 填充定子与转子之间的空隙（其实填充的所有）\r\n  }\r\n\r\n  myBezierEllipse(ctx) {\r\n    PaintUtils.BezierEllipse(ctx, this.airgapData.avgGaps, this.circleInterval,\r\n      this.size, this.tv_avgGapsInfo.min, this.tv_avgGapsInfo.max);\r\n  }\r\n\r\n\r\n  paintTDBJH() {\r\n    var ctx = this.canvases.TDBJH.getContext('2d');\r\n    ctx.fillStyle = 'red';\r\n    ctx.font = '20pt Calibri';\r\n\r\n    var dataOuter = this.airgapData.avgGaps;\r\n    for (var i = 0; i < dataOuter.length; i++) {\r\n      var position = PaintUtils.getxy(i, dataOuter, this.circleInterval,\r\n        this.size, this.tv_avgGapsInfo.min, this.tv_avgGapsInfo.max);\r\n      ctx.fillText(i + 1, position[0], position[1]);\r\n    }\r\n  }\r\n\r\n  setDealData(yData) {\r\n    var min = 0;\r\n    var minIndex = 0;\r\n    var max = 0;\r\n    var maxIndex = 0;\r\n\r\n    var avg = 0;\r\n    var sum = 0;\r\n    for (var x = 0; x < yData.length; x++) {\r\n      if (x == 0 || min > yData[x]) {\r\n        min = yData[x];\r\n        minIndex = x;\r\n      }\r\n      if (max == 0 || max < yData[x]) {\r\n        max = yData[x];\r\n        maxIndex = x;\r\n      }\r\n      sum += yData[x];\r\n    }\r\n    avg = sum / yData.length;\r\n    var newYData = [];\r\n    for (var x = 0; x < yData.length; x++) {\r\n      var temp = (yData[x] - min) / (max - min) * this.circleInterval / 3; //（磁极数据 - 最小值） * 放大倍数\r\n      newYData.push(temp);\r\n    }\r\n    this.dealData = {\r\n      \"min\": min,\r\n      \"minIndex\": minIndex,\r\n      \"max\": max,\r\n      \"maxIndex\": maxIndex,\r\n      \"avg\": avg,\r\n      \"newPoleData\": newYData\r\n    };\r\n  }\r\n\r\n  paintZZZXY() {\r\n    var ctx = this.canvases.ZZZXY.getContext('2d');\r\n    ctx.clearRect(0, 0, this.size, this.size);\r\n    var size = this.size;\r\n\r\n    var circle = []; //磁极所有边缘数据\r\n    var dashLine = []; //每根磁极线坐标\r\n    var fiterData = this.dealData.newPoleData;\r\n    var lineXY = this.lineXY;\r\n    var sinAngle = 360 / this.poleData.length;\r\n\r\n    //是否旋转转子: 中心点\r\n    var tempSize = size;\r\n\r\n    if (this._config.rotorIndex > 0) {\r\n      ctx.save();\r\n      ctx.translate(size / 2, size / 2);\r\n      ctx.rotate((360 / this.poleData.length) * this._config.rotorIndex *\r\n        Math.PI / 180);\r\n      tempSize = 0;\r\n    }\r\n\r\n    for (var i = 0; i < this.poleData.length; i++) {\r\n      var angle = 360 - sinAngle * i;\r\n      var radian = angle * Math.PI / 180;\r\n      var r = 3 * this.circleInterval + fiterData[this.poleData.length - 1 -\r\n        i]; //倒序\r\n      var x = tempSize / 2 + r * Math.cos(radian);\r\n      var y = tempSize / 2 + r * Math.sin(radian);\r\n\r\n      dashLine.push([x, y]);\r\n      lineXY.push([x, y]);\r\n\r\n      //边缘数据：只有一个点，怎么连起来，看成一个圈？每个点左右移动1/2角度，一个左移，一个右移，画一条直线，做一个磁极\r\n      var upTempAngle = angle + sinAngle / 2;\r\n      var upRadian = upTempAngle * Math.PI / 180;\r\n      var x2 = tempSize / 2 + r * Math.cos(upRadian);\r\n      var y2 = tempSize / 2 + r * Math.sin(upRadian);\r\n      circle.push([x2, y2]);\r\n\r\n      var nextTempAngle = angle - sinAngle / 2;\r\n      var nextRadian = nextTempAngle * Math.PI / 180;\r\n      var x3 = tempSize / 2 + r * Math.cos(nextRadian);\r\n      var y3 = tempSize / 2 + r * Math.sin(nextRadian);\r\n      circle.push([x3, y3]);\r\n    }\r\n\r\n    //画每个磁极的边框，并填充背景\r\n    ctx.strokeStyle = \"red\";\r\n    for (var i = 0; i <= circle.length; i++) {\r\n      if (i == 0) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(circle[i][0], circle[i][1]);\r\n      } else if (i <= circle.length - 1) {\r\n        ctx.lineTo(circle[i][0], circle[i][1]);\r\n      } else {\r\n        ctx.lineTo(circle[0][0], circle[0][1]);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n      }\r\n    }\r\n    ctx.fillStyle = '#1f1d1d'; //与背景色一致，填充颜色\r\n    ctx.fill();\r\n\r\n    //画每根磁极虚线\r\n    ctx.strokeStyle = \"red\";\r\n    for (var i = 0; i < dashLine.length; i++) {\r\n      //画内部线条，如果等于对应的索引，那么就\r\n      if (i == dashLine.length - this._config.currentIndex - 1) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(tempSize / 2, tempSize / 2);\r\n        ctx.lineTo(dashLine[i][0], dashLine[i][1]);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n      } else {\r\n        PaintUtils.drawDashLine(ctx, tempSize / 2, tempSize / 2, dashLine[i][\r\n            0\r\n          ],\r\n          dashLine[i][1], 2); //画每根磁极虚线\r\n      }\r\n    }\r\n\r\n    if (this._config.rotorIndex > 0) {\r\n      ctx.restore();\r\n    }\r\n  }\r\n\r\n  //画坐标系\r\n  paintSZXBC() {\r\n    var ctx = this.canvases.SZXBC.getContext('2d');\r\n    var size = this.size;\r\n    var coordinateInterval = size / 60;\r\n    ctx.strokeStyle = \"white\";\r\n\r\n    //X轴\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, size / 2);\r\n    ctx.lineTo(size, size / 2);\r\n    ctx.stroke();\r\n    ctx.closePath();\r\n    //Y轴\r\n    ctx.beginPath();\r\n    ctx.moveTo(size / 2, 0);\r\n    ctx.lineTo(size / 2, size);\r\n    ctx.stroke();\r\n    ctx.closePath();\r\n    //X轴上的间隔\r\n    for (var i = 0; i < size / coordinateInterval; i++) {\r\n      ctx.beginPath();\r\n      ctx.moveTo(coordinateInterval * (i + 1), size / 2);\r\n      ctx.lineTo(coordinateInterval * (i + 1), size / 2 - 5);\r\n      ctx.stroke();\r\n      ctx.closePath();\r\n    }\r\n    //Y轴上的间隔\r\n    for (var i = 0; i < size / coordinateInterval; i++) {\r\n      ctx.beginPath();\r\n      ctx.moveTo(size / 2, coordinateInterval * (i + 1));\r\n      ctx.lineTo(size / 2 + 5, coordinateInterval * (i + 1));\r\n      ctx.stroke();\r\n      ctx.closePath();\r\n    }\r\n  }\r\n\r\n  // info = {\r\n  //   waves: [],\r\n  //   current: { // 当前测点\r\n  //     JXJD: null, // 间相角度\r\n  //     CJBH: null, // 磁极编号\r\n  //     CJJD: null, // 磁极角度\r\n  //     JSQX: null, // 计算气隙\r\n  //   },\r\n  //   rotor: { // 转子信息\r\n  //     BYD: null, // 不圆度\r\n  //     PXL: null, // 偏心量\r\n  //     PXJ: null, // 偏心角\r\n  //   },\r\n  //   character: { // 特征信息\r\n  //     CLZXQX: null, // 测量最小气隙\r\n  //     CLZXCJBH: null, // 测量最小磁极编号\r\n  //     JSZXQXFW: null, // 计算最小气隙方位\r\n  //     CLZDQX: null, // 测量最大气隙\r\n  //     CLZDCJBH: null, // 测量最大磁极编号\r\n  //     JSZDQXFW: null, // 计算最大气隙方位\r\n  //   }\r\n  // };\r\n\r\n  info(info) {\r\n    _.defaults(info, {\r\n      waves: [],\r\n      current: {},\r\n      rotor: {},\r\n      character: {}\r\n    });\r\n    this.infoWaves(info.waves);\r\n    this.infoCurrent(info.current);\r\n    this.infoRotor(info.rotor);\r\n    this.infoCharacter(info.character);\r\n  }\r\n\r\n  infoWaves(waves) {\r\n    while (waves.length > 0) { // 清空\r\n      waves.pop();\r\n    }\r\n    for (var i = 0; i < this.airgapData.avgGaps.length; i++) {\r\n      waves.push({\r\n        num: i + 1,\r\n        name: this.waveName[i],\r\n        angle: this.airgapData.sensorAngles[i],\r\n        avg: this.airgapData.avgGaps[i].toFixed(2)\r\n      });\r\n    }\r\n    return waves;\r\n  }\r\n\r\n  infoCurrent(current) {\r\n    var singelAngel = 360 / this.poleData.length;\r\n    var poleIndex = this._config.currentIndex;\r\n\r\n    function angel(index) {\r\n      return index == 0 ? 0 : 360 - index * singelAngel;\r\n    }\r\n\r\n    current.JXJD = angel(this._config.rotorIndex);\r\n    current.CJBH = poleIndex + 1;\r\n    current.CJJD = angel(poleIndex);\r\n    current.JSQX = this.poleData[poleIndex].toFixed(2);\r\n  }\r\n\r\n  infoRotor(rotor) {\r\n    rotor.BYD = this.airgapData.result.rotor.toFixed(2);\r\n    rotor.PXL = this.airgapData.result.statorRoundness.toFixed(2);\r\n    rotor.PXJ = this.airgapData.result.statorAngle.toFixed(2);\r\n  }\r\n\r\n  infoCharacter(character) {\r\n    var singelAngel = 360 / this.poleData.length;\r\n\r\n    character.CLZXQX = this.dealData.min.toFixed(2);\r\n    character.CLZXCJBH = this.dealData.minIndex + 1;\r\n    character.JSZXQXFW = 360 - this.dealData.minIndex * singelAngel;\r\n    character.CLZDQX = this.dealData.max.toFixed(2);\r\n    character.CLZDCJBH = this.dealData.maxIndex + 1;\r\n    character.JSZDQXFW = 360 - this.dealData.maxIndex * singelAngel;\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\nclass PaintUtils {\r\n\r\n  static calDataOuterCircleData(dataOuter, circleInterval, size, min, max) {\r\n    var tempDataOuter = [];\r\n    if (dataOuter.length == 4) {\r\n      for (var i = 0; i < dataOuter.length; i++) {\r\n        tempDataOuter.push(dataOuter[i]);\r\n        tempDataOuter.push(dataOuter[i]);\r\n      }\r\n    } else {\r\n      tempDataOuter = dataOuter;\r\n    }\r\n    var circleData = [];\r\n    for (var i = 0; i < tempDataOuter.length; i++) {\r\n      var current = PaintUtils.getxy(i, tempDataOuter, circleInterval,\r\n        size, min, max);\r\n      circleData.push([current[0], current[1]]);\r\n    }\r\n    return circleData;\r\n  }\r\n\r\n  //获取每个气隙监测点的最小信息，以及角度，获取对应的坐标\r\n  static getxy(i, dataOuter, circleInterval, size, min, max) {\r\n    var sinAngle = 360 / dataOuter.length;\r\n    var angle = 360 - sinAngle * i;\r\n    var radian = angle * Math.PI / 180;\r\n    //每个磁极减去一个数量级，然后乘以另外一个数量级，画图容易区分，不然就是一个圆（精度不大）\r\n    var r = 4 * circleInterval + (dataOuter[i] - min) / (max - min) *\r\n      circleInterval;\r\n    var x = size / 2 + r * Math.cos(radian);\r\n    var y = size / 2 + r * Math.sin(radian);\r\n    return [x, y];\r\n  }\r\n\r\n  static drawCircle(ctx, r, x, y) {\r\n    y = y || x;\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, r, 0, Math.PI * 2, true);\r\n    ctx.stroke();\r\n    ctx.closePath();\r\n  }\r\n\r\n\r\n  //画虚线\r\n  static drawDashLine(ctx, x1, y1, x2, y2, dashLength) {\r\n    ctx.beginPath();\r\n    var dashLen = dashLength === undefined ? 5 : dashLength;\r\n    var xpos = x2 - x1; //得到横向的宽度;\r\n    var ypos = y2 - y1; //得到纵向的高度;\r\n    var numDashes = Math.floor(Math.sqrt(xpos * xpos + ypos * ypos) /\r\n      dashLen);\r\n    //利用正切获取斜边的长度除以虚线长度，得到要分为多少段;\r\n    for (var i = 0; i < numDashes; i++) {\r\n      if (i % 2 === 0) {\r\n        ctx.moveTo(x1 + (xpos / numDashes) * i, y1 + (ypos / numDashes) *\r\n          i); //有了横向宽度和多少段，得出每一段是多长，起点 + 每段长度 * i = 要绘制的起点；\r\n      } else {\r\n        ctx.lineTo(x1 + (xpos / numDashes) * i, y1 + (ypos / numDashes) *\r\n          i);\r\n      }\r\n    }\r\n    ctx.stroke();\r\n    ctx.closePath();\r\n  }\r\n\r\n\r\n  //画贝塞尔曲线\r\n  static BezierEllipse(ctx, dataOuter, circleInterval, size, min, max) {\r\n\r\n    var circleData = PaintUtils.calDataOuterCircleData(dataOuter,\r\n      circleInterval, size, min, max);\r\n\r\n    var tempHeight = circleInterval - circleInterval * 0.1; //固定值\r\n\r\n    if (circleData.length == 8) {\r\n      ctx.beginPath();\r\n      ctx.moveTo(circleData[0][0], circleData[0][1]);\r\n      ctx.quadraticCurveTo(circleData[1][0] + tempHeight, circleData[1][1] -\r\n        tempHeight, circleData[2][0], circleData[2][1]);\r\n      ctx.quadraticCurveTo(circleData[3][0] - tempHeight, circleData[3][1] -\r\n        tempHeight, circleData[4][0], circleData[4][1]);\r\n      ctx.quadraticCurveTo(circleData[5][0] - tempHeight, circleData[5][1] +\r\n        tempHeight, circleData[6][0], circleData[6][1]);\r\n      ctx.quadraticCurveTo(circleData[7][0] + tempHeight, circleData[7][1] +\r\n        tempHeight, circleData[0][0], circleData[0][1]);\r\n      ctx.stroke();\r\n      ctx.closePath();\r\n    } else if (circleData.length == 4) {\r\n      ctx.beginPath();\r\n      ctx.moveTo(circleData[0][0], circleData[0][1]);\r\n      ctx.quadraticCurveTo(circleData[1][0] + tempHeight, circleData[1][1] -\r\n        tempHeight, circleData[2][0], circleData[2][1]);\r\n      ctx.quadraticCurveTo(circleData[3][0] - tempHeight, circleData[3][1] -\r\n        tempHeight, circleData[0][0], circleData[0][1]);\r\n      ctx.stroke();\r\n      ctx.closePath();\r\n    }\r\n\r\n  };\r\n\r\n}\r\n\r\n\r\nclass NotUse {\r\n  //A(X1,Y1) B(X2,Y2)则AB斜率=（Y1-Y2）/(X1-X2)\r\n  static getK(X1, Y1, X2, Y2) {\r\n    return (Y1 - Y2) / (X1 - X2);\r\n  }\r\n\r\n\r\n  canvasWriteTxt(fontColor, fontTxt, x, tempHeight) {\r\n    this.yStart = this.yStart + tempHeight;\r\n\r\n    var ctx = this.txtCtx;\r\n    ctx.font = \"12px\";\r\n    ctx.fillStyle = fontColor;\r\n    ctx.fillText(fontTxt, x, this.yStart);\r\n  }\r\n\r\n  getPointOnCanvas(canvas, x, y) {\r\n    var bbox = canvas.getBoundingClientRect();\r\n    return {\r\n      x: x - bbox.left * (canvas.width / bbox.width),\r\n      y: y - bbox.top * (canvas.height / bbox.height)\r\n    };\r\n  }\r\n\r\n  //需不需要点击事件？\r\n  drawSolidLine(dataIndex) {\r\n    var index = dataIndex;\r\n    if (index == this.lineXY.length) {\r\n      index = 0;\r\n    }\r\n    var ctx = ctx;\r\n    //原来选中的要去除选中\r\n    for (var i = 0; i < this.lineXY.length; i++) {\r\n      ctx.strokeStyle = '#2F353B'; //与背景色一致，填充颜色\r\n      ctx.beginPath();\r\n      ctx.moveTo(this.size / 2, this.size / 2);\r\n      ctx.lineTo(this.lineXY[i][0], this.lineXY[i][1]);\r\n      ctx.stroke();\r\n      ctx.closePath();\r\n\r\n      ctx.strokeStyle = 'red';\r\n      PaintUtils.drawDashLine(ctx, this.size / 2, this.size / 2, this.lineXY[\r\n          i][0],\r\n        this.lineXY[i][1], 2);\r\n    }\r\n\r\n  }\r\n\r\n\r\n  //画贝塞尔曲线\r\n  newBezierEllipse(circleData, dataOuter) {\r\n    var tempHeight = this.circleInterval - this.circleInterval * 0.1; //固定值\r\n    var ctx = ctx;\r\n    ctx.beginPath();\r\n    var endData = circleData[0];\r\n    circleData.push(endData);\r\n\r\n    for (var i = 0; i < circleData.length; i++) {\r\n      var current = circleData[i];\r\n      var up = circleData[i - 1];\r\n      if (i > 0) {\r\n        var tempData = [up[0], current[1]];\r\n        if (i == 2 || i == 4) {\r\n          tempData = [current[0], up[1]];\r\n        }\r\n      }\r\n      if (i == 0) {\r\n        ctx.moveTo(circleData[i][0], circleData[i][1]);\r\n      } else if (i == circleData.length - 1) {\r\n        ctx.quadraticCurveTo(tempData[0], tempData[1], circleData[0][0],\r\n          circleData[0][1]);\r\n      } else {\r\n        ctx.quadraticCurveTo(tempData[0], tempData[1], circleData[i][0],\r\n          circleData[i][1]);\r\n      }\r\n    }\r\n    ctx.stroke();\r\n    ctx.closePath();\r\n  };\r\n}"]}