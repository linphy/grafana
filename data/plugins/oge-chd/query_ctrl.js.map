{"version":3,"sources":["../src/query_ctrl.js"],"names":["GenericDatasourceQueryCtrl","$scope","$injector","scope","dsOption","name","value","typeOption","rtdbOption","target","tag","dsType","waveType","rtdbType","hisCount","hisInterval","script","query","datasource","metricFindQuery","panelCtrl","refresh","QueryCtrl","templateUrl"],"mappings":";;;;;;;;;AAAA;;AACA;;;;;;;;IAEaA,0B,WAAAA,0B;;;AAEX,sCAAYC,MAAZ,EAAoBC,SAApB,EAAgC;AAAA;;AAAA,wJACxBD,MADwB,EAChBC,SADgB;;AAG9B,UAAKC,KAAL,GAAaF,MAAb;AACA,UAAKG,QAAL,GAAgB,CACd,EAAEC,MAAM,OAAR,EAAiBC,OAAO,CAAxB,EADc,EAEd,EAAED,MAAM,MAAR,EAAgBC,OAAO,CAAvB,EAFc,CAAhB;AAIA,UAAKC,UAAL,GAAkB,CAChB,EAAEF,MAAM,MAAR,EAAgBC,OAAO,CAAvB,EADgB,EAEhB,EAAED,MAAM,MAAR,EAAgBC,OAAO,CAAvB,EAFgB,EAGhB,EAAED,MAAM,OAAR,EAAiBC,OAAO,CAAxB,EAHgB,CAAlB;AAKA,UAAKE,UAAL,GAAkB,CAChB,EAAEH,MAAM,KAAR,EAAeC,OAAO,CAAtB,EADgB,EAEhB,EAAED,MAAM,KAAR,EAAeC,OAAO,CAAtB,EAFgB,EAGhB,EAAED,MAAM,OAAR,EAAiBC,OAAO,CAAxB,EAHgB,CAAlB;AAKA,UAAKG,MAAL,CAAYC,GAAZ,GAAkB,MAAKD,MAAL,CAAYC,GAAZ,IAAmB,EAArC;AACA,UAAKD,MAAL,CAAYE,MAAZ,GAAqB,MAAKF,MAAL,CAAYE,MAAZ,IAAsB,CAA3C;AACA,UAAKF,MAAL,CAAYG,QAAZ,GAAuB,MAAKH,MAAL,CAAYG,QAAZ,IAAwB,CAA/C;AACA,UAAKH,MAAL,CAAYI,QAAZ,GAAuB,MAAKJ,MAAL,CAAYI,QAAZ,IAAwB,CAA/C;AACA,UAAKJ,MAAL,CAAYK,QAAZ,GAAuB,MAAKL,MAAL,CAAYK,QAAZ,IAAwB,IAA/C;AACA,UAAKL,MAAL,CAAYM,WAAZ,GAA0B,MAAKN,MAAL,CAAYM,WAAZ,IAA2B,IAArD;AACA,UAAKN,MAAL,CAAYO,MAAZ,GAAqB,MAAKP,MAAL,CAAYO,MAAZ,IAAsB,EAA3C;AAxB8B;AAyB/B;;;;+BAEUC,K,EAAO;AAChB,aAAO,KAAKC,UAAL,CAAgBC,eAAhB,CAAgCF,SAAS,GAAzC,CAAP;AACD;;;uCAEkB;AACjB,WAAKG,SAAL,CAAeC,OAAf,GADiB,CACS;AAC3B;;;;EAnC6CC,c;;AAsChDtB,2BAA2BuB,WAA3B,GAAyC,4BAAzC","file":"query_ctrl.js","sourcesContent":["import {QueryCtrl} from 'app/plugins/sdk';\r\nimport './css/query-editor.css!'\r\n\r\nexport class GenericDatasourceQueryCtrl extends QueryCtrl {\r\n\r\n  constructor($scope, $injector)  {\r\n    super($scope, $injector);\r\n\r\n    this.scope = $scope;\r\n    this.dsOption = [\r\n      { name: '智杰实时库', value: 0 },\r\n      { name: '振动波形', value: 1 }\r\n    ];\r\n    this.typeOption = [\r\n      { name: '原始数据', value: 0 },\r\n      { name: '频域数据', value: 1 },\r\n      { name: '包络谱数据', value: 2 }\r\n    ];\r\n    this.rtdbOption = [\r\n      { name: '实时值', value: 0 },\r\n      { name: '历史值', value: 1 },\r\n      { name: '历史等间隔', value: 2 }\r\n    ];\r\n    this.target.tag = this.target.tag || '';\r\n    this.target.dsType = this.target.dsType || 0;\r\n    this.target.waveType = this.target.waveType || 0;\r\n    this.target.rtdbType = this.target.rtdbType || 0;\r\n    this.target.hisCount = this.target.hisCount || 5000;\r\n    this.target.hisInterval = this.target.hisInterval || 1000;\r\n    this.target.script = this.target.script || '';\r\n  }\r\n\r\n  getOptions(query) {\r\n    return this.datasource.metricFindQuery(query || '*');\r\n  }\r\n\r\n  onChangeInternal() {\r\n    this.panelCtrl.refresh(); // Asks the panel to refresh data.\r\n  }\r\n}\r\n\r\nGenericDatasourceQueryCtrl.templateUrl = 'partials/query.editor.html';\r\n\r\n"]}