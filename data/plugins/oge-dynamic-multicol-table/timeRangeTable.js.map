{"version":3,"sources":["../../src/timeRangeTable.js"],"names":["OgeAlertMetricsPanelCtrl","angular","_","isNumber","$","moment","relativeTimeThreshold","panelDefaults","Fmetrics","dataAndRefId","numFour","data","valueFontSize","valuesUrl","dataPrecise","statvalues","fontSize","displayMode","fontposition","showRange","rangeAttri","value","timeList","TimeRangeTableTableCtrl","$scope","$injector","backendSrv","templateSrv","timeSrv","linkSrv","showCover","defaults","panel","displayModeOptions","name","valueShowStatOptions","text","manualTableElem","panelNewHeight","timeRangeLabelS","show","xPos","currentVal","events","on","onInitEditMode","bind","onDataReceived","onDataError","that","fontSizes","fontPositions","addEditorTab","err","dataList","length","map","dl","datapoints","isArray","dldp","indexOf","push","sort","a","b","j","totalNum","statMax","timeMax","statMin","timeMin","i","time","parseFloat","toFixed","Number","parseInt","format","undefined","isoint","curPointArr","filter","item","lastPoint","last","lastValue","timeRangeN","find","max","getdataAndRefId","newCreate","isdlp","curPointAr","cell","cursor","outInd","innerInd","tableStyle","fontStyle","alertColor","bool","tableArr","link","url","isAlertValue","v1","alertValue1","v2","alertValue2","v","isNaN","getAlertLevelColor","ogeAlertEnabled","ogeAlertColorType","fontsize","color","outerIndex","innerIndex","type","dashUri","theTemplates","variables","linkInfo","getPanelLinkAnchorInfo","window","open","href","target","inde","colStyle","colWidth","e","elemWidth","innerWidth","offsetX","currenPV","Math","floor","rowLength","subtract","pop","subtractTableArr","Array","row","tempArr","id","count","columnLength","column","tableArrVal","alarm","level","dataAndRefIdOptions","dataSourceTargets","targets","len","targetName","targetCode","newArr","split","queryStr","callback","search","query","then","hits","dashboards","dash","title","dashboard","uri","scope","elem","attrs","ctrl","height","templateUrl"],"mappings":"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","file":"timeRangeTable.js","sourcesContent":["import {\r\n    // MetricsPanelCtrl,\r\n    OgeAlertMetricsPanelCtrl\r\n} from 'app/plugins/sdk';\r\nimport angular from 'angular';\r\nimport _, { isNumber } from 'lodash';\r\nimport $ from 'jquery';\r\nimport './css/multistat-panel.css!';\r\nimport moment, { relativeTimeThreshold } from 'moment';\r\n\r\nvar panelDefaults = {\r\n    Fmetrics: {},\r\n    dataAndRefId: [],\r\n    numFour: [2, 2],\r\n    data: [],\r\n    valueFontSize: '100%',\r\n    valuesUrl: [],\r\n    dataPrecise: 1,\r\n    statvalues: 'current',\r\n    fontSize: '100%',\r\n    displayMode: 'text',\r\n    fontposition: 'left',\r\n    showRange: false,\r\n    rangeAttri: {\r\n        value: '0',\r\n        timeList: [],\r\n    },\r\n};\r\nvar that;\r\nexport class TimeRangeTableTableCtrl extends OgeAlertMetricsPanelCtrl {\r\n\r\n    constructor($scope, $injector, backendSrv, templateSrv, timeSrv, linkSrv) {\r\n        super($scope, $injector, {\r\n            showCover: true\r\n        });\r\n        _.defaults(this.panel, panelDefaults);\r\n        this.displayModeOptions = [{\r\n                name: '文本',\r\n                value: 'text'\r\n            },\r\n            {\r\n                name: '值',\r\n                value: 'value'\r\n            },\r\n            {\r\n                name: '时间',\r\n                value: 'time'\r\n            }\r\n        ]\r\n        this.valueShowStatOptions = [\r\n            {\r\n                text: 'Avg',\r\n                value: 'avg'\r\n            },\r\n            {\r\n                text: 'Min',\r\n                value: 'min'\r\n            },\r\n            {\r\n                text: 'Max',\r\n                value: 'max'\r\n            },\r\n            {\r\n                text: 'Total',\r\n                value: 'total'\r\n            },\r\n            {\r\n                text: 'Count',\r\n                value: 'count'\r\n            },\r\n            {\r\n                text: 'Current',\r\n                value: 'current'\r\n            }\r\n        ];\r\n        this.backendSrv = backendSrv;\r\n        this.timeSrv = timeSrv;\r\n        this.linkSrv = linkSrv;\r\n        this.manualTableElem = [];\r\n        this.panelNewHeight = '';\r\n        this.timeRangeLabelS = {\r\n            show: 'none',\r\n            xPos: 0,\r\n            currentVal: ''\r\n        };\r\n        this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\r\n        this.events.on('data-received', this.onDataReceived.bind(this));\r\n        this.events.on('data-error', this.onDataError.bind(this));\r\n        that = this;\r\n    }\r\n\r\n    onInitEditMode() {\r\n        this.panel.fontSizes = ['20%', '30%', '50%', '70%', '80%', '100%', '110%', '120%','130%','140%', '150%','160%','170%', '200%'];\r\n        this.panel.fontPositions = [{value:'right', name:'右'}, {value:'center', name:'居中'}, {value:'left', name:'左'}];\r\n        this.addEditorTab('Options', 'public/plugins/oge-dynamic-multicol-table/editor.html', 2);\r\n        this.addEditorTab('Url Setting', 'public/plugins/oge-dynamic-multicol-table/urlsetting.html', 3);\r\n    }\r\n\r\n    onDataError(err) {\r\n        this.onDataReceived([]);\r\n    }\r\n    onDataReceived(dataList) {\r\n        if (dataList && dataList.length > 0) {\r\n            if (this.panel.showRange) {\r\n                this.panel.rangeAttri.timeList=[];\r\n                dataList.map(dl=>{\r\n                    if (dl.datapoints&&dl.datapoints.length>0&&_.isArray(dl.datapoints[0])){\r\n                        dl.datapoints.map(dldp=>{\r\n                            if (_.isArray(dldp)) {\r\n                                if (this.panel.rangeAttri.timeList.indexOf(dldp[1])==-1) {\r\n                                    this.panel.rangeAttri.timeList.push(dldp[1]);\r\n                                    this.panel.rangeAttri.timeList.sort(function(a,b){return a-b});\r\n                                }\r\n                            }\r\n                        })\r\n                    }\r\n                });\r\n            }\r\n\r\n            for(let j=0;j< dataList.length;j++) {\r\n                if(!dataList[j].datapoints || (dataList[j].datapoints.length === 0) || !(_.isArray(dataList[j].datapoints[0]))){\r\n                    dataList[j].value = '';\r\n                    continue;\r\n                }\r\n                var totalNum = 0;\r\n                var statMax = dataList[j].datapoints[0][0];\r\n                var timeMax = dataList[j].datapoints[0][1];\r\n                var statMin = dataList[j].datapoints[0][0];\r\n                var timeMin = dataList[j].datapoints[0][1];\r\n                for(var i = 0; i < dataList[j].datapoints.length; i++) {\r\n                    if(_.isArray(dataList[j].datapoints[i])){\r\n                        var value = dataList[j].datapoints[i][0];\r\n                        var time = dataList[j].datapoints[i][1];\r\n                        if(statMax < value) {\r\n                            statMax = value;\r\n                            timeMax = time;\r\n                        }\r\n                        if(statMin > value) {\r\n                            statMin = value;\r\n                            timeMin = time;\r\n                        }\r\n                        totalNum += value;\r\n                    } else {\r\n                        dataList[j].value = '';\r\n                    }\r\n                }\r\n\r\n                switch(this.panel.statvalues) {\r\n                    case 'avg':\r\n                        dataList[j].value = parseFloat((totalNum/dataList[j].datapoints.length).toFixed(this.panel.dataPrecise));\r\n                        break;\r\n                    case 'min':\r\n                        dataList[j].value = parseFloat(statMin.toFixed(this.panel.dataPrecise));\r\n                        dataList[j].time = moment(Number.parseInt(timeMin)).format(\"YYYY-MM-DD HH:mm:ss\");\r\n                        break;\r\n                    case 'max':\r\n                        dataList[j].value = parseFloat(statMax.toFixed(this.panel.dataPrecise));\r\n                        dataList[j].time = moment(Number.parseInt(timeMax)).format(\"YYYY-MM-DD HH:mm:ss\");\r\n                        break;\r\n                    case 'total':\r\n                        dataList[j].value = parseFloat(totalNum.toFixed(this.panel.dataPrecise));\r\n                        break;\r\n                    case 'count':\r\n                        dataList[j].value = parseFloat(dataList[j].datapoints.length);\r\n                        break;\r\n                    default:\r\n                        if (this.panel.showRange && this.panel.rangeAttri.timeList[this.panel.rangeAttri.value]!==undefined) {\r\n                            var isoint = dataList[j].datapoints[0];\r\n                            if(_.isArray(isoint)) {\r\n                                var curPointArr = dataList[j].datapoints.filter(item=>item[1]===this.panel.rangeAttri.timeList[this.panel.rangeAttri.value]);\r\n                                dataList[j].value = curPointArr.length>0? parseFloat(curPointArr[0][0].toFixed(this.panel.dataPrecise)) : '';\r\n                                dataList[j].time = curPointArr.length>0? moment(Number.parseInt(curPointArr[0][1])).format(\"YYYY-MM-DD HH:mm:ss\"):'';\r\n\r\n                            } else {\r\n                                dataList[j].value = '';\r\n                            }\r\n                        } else {\r\n                            var lastPoint = _.last(dataList[j].datapoints);\r\n                            var lastValue = _.isArray(lastPoint) ? lastPoint[0] : null;\r\n                            if(lastValue == null) {\r\n                                dataList[j].value = '';\r\n                            } else {\r\n                                dataList[j].value = parseFloat(lastValue.toFixed(this.panel.dataPrecise));\r\n                                dataList[j].time = moment(Number.parseInt(lastPoint[1])).format(\"YYYY-MM-DD HH:mm:ss\");\r\n                            }\r\n                        }\r\n                }\r\n\r\n            }\r\n            var timeRangeN = this.manualTableElem.find('.timerangen');\r\n            timeRangeN[0].max = this.panel.rangeAttri.timeList.length-1;\r\n        }\r\n\r\n\t\tthis.data = dataList;\r\n        this.getdataAndRefId();\r\n        this.newCreate();\r\n    }\r\n\r\n    rangeClickTime() {\r\n        if (this.panel.showRange && this.panel.statvalues=='current' && this.panel.rangeAttri.timeList[this.panel.rangeAttri.value]) {\r\n            this.data.map(dl=>{\r\n                var isdlp = dl.datapoints[0];\r\n                if (_.isArray(isdlp)) {\r\n                    var curPointAr = dl.datapoints.filter(item=>item[1]===this.panel.rangeAttri.timeList[this.panel.rangeAttri.value]);\r\n                    dl.value = curPointAr.length>0? parseFloat(curPointAr[0][0].toFixed(this.panel.dataPrecise)) : '';\r\n                    dl.time = curPointAr.length>0? moment(Number.parseInt(curPointAr[0][1])).format(\"YYYY-MM-DD HH:mm:ss\"):'';\r\n                } else {\r\n                    dl.value = '';\r\n                }\r\n            });\r\n            this.getdataAndRefId();\r\n            this.newCreate();\r\n        }\r\n    }\r\n\r\n    ogeAlertManualTable(cell, cursor, outInd, innerInd) {\r\n        this.panel.tableStyle = {};\r\n        let fontStyle = 'normal';\r\n        let alertColor = '';\r\n        let bool = this.panel.tableArr[outInd][innerInd].link && this.panel.tableArr[outInd][innerInd].link.url;\r\n        if (bool) {\r\n            fontStyle = 'italic';\r\n        }\r\n        if (cell.isAlertValue&&cell.displayMode===\"value\") {\r\n            let v1 = cell.alertValue1;\r\n            let v2 = cell.alertValue2;\r\n            let v =  Number(cell.text);\r\n            if (!isNaN(v1) && v<v1) {\r\n                alertColor = this.getAlertLevelColor(1);\r\n            } else if(!isNaN(v1) && !isNaN(v2) && v>=v1 && v<=v2){\r\n                alertColor = this.getAlertLevelColor(2);\r\n            } else if(!isNaN(v2) && v>v2) {\r\n                alertColor = this.getAlertLevelColor(3);\r\n            }\r\n        }\r\n        if (this.panel.ogeAlertEnabled && this.panel.ogeAlertColorType === 'B') {\r\n            this.panel.tableStyle = {\r\n                'font-size': cell.fontsize,\r\n                'font-style': fontStyle,\r\n                'background-color': alertColor?alertColor:cell.color,\r\n                'text-align': this.panel.fontposition,\r\n                'cursor': cursor\r\n            };\r\n        } else if (this.panel.ogeAlertEnabled && this.panel.ogeAlertColorType === 'V') {\r\n            this.panel.tableStyle = {\r\n                'font-size': cell.fontsize,\r\n                'font-style': fontStyle,\r\n                'color': alertColor?alertColor: cell.color,\r\n                'text-align': this.panel.fontposition,\r\n                'cursor': cursor\r\n            };\r\n        } else {\r\n            this.panel.tableStyle = {\r\n                'font-size': cell.fontsize,\r\n                'text-align': this.panel.fontposition,\r\n                'font-style': fontStyle\r\n            };\r\n        }\r\n        return this.panel.tableStyle;\r\n    }\r\n    url(outerIndex, innerIndex) {//你的代码，没有动\r\n        let link = this.panel.tableArr[outerIndex][innerIndex].link;\r\n        if (link && link.type && (link.type === 'dashboard')) {\r\n            if (link.dashUri === undefined || link.dashUri === '') {\r\n                link.url = '';\r\n                return;\r\n            }\r\n        } else if (link && link.type && (link.type === 'absolute')) {\r\n            if (link.url === undefined || link.url === '') {\r\n                link.dashUri = '';\r\n                return;\r\n            }\r\n        } else {\r\n            return;\r\n        }\r\n        var theTemplates = this.templateSrv.variables;\r\n        var linkInfo = this.linkSrv.getPanelLinkAnchorInfo(link, theTemplates);\r\n        window.open(linkInfo.href, linkInfo.target);\r\n    }\r\n    newWidth(inde) {\r\n        this.panel.colStyle = {\r\n            'width': this.panel.tableArr[0][inde].colWidth,\r\n            'text-align': this.panel.fontposition\r\n        };\r\n        return this.panel.colStyle;\r\n    }\r\n\r\n    rangeMouseEnter(e) {\r\n        var elemWidth = this.manualTableElem.find('input[type=range]').innerWidth();\r\n        this.timeRangeLabelS.show = 'block';\r\n        if (e.offsetX >=elemWidth-120) {\r\n            this.timeRangeLabelS.xPos = elemWidth-120;\r\n        } else {\r\n            this.timeRangeLabelS.xPos = e.offsetX;\r\n        }\r\n        var currenPV = Math.floor(e.offsetX*this.panel.rangeAttri.timeList.length/elemWidth);\r\n        this.timeRangeLabelS.currentVal = moment(Number.parseInt(this.panel.rangeAttri.timeList[currenPV])).format(\"YYYY-MM-DD HH:mm:ss\");\r\n    }\r\n\r\n    rangeMouseLeave(e) {\r\n        this.timeRangeLabelS.show = 'none';\r\n    }\r\n\r\n    timeRangeNHangeLabel() {\r\n        return {\r\n            'position': 'fixed',\r\n            'z-index': 5,\r\n            'display': this.timeRangeLabelS.show,\r\n            'left': this.timeRangeLabelS.xPos+'px',\r\n            'top': '10px'\r\n        }\r\n    }\r\n\r\n    newCreate() {//这个方法创建了表格，并且控制表格的删除和增加\r\n        if (this.panel.tableArr && this.panel.tableArr.length > this.panel.numFour[0]){//删除行\r\n            let rowLength = this.panel.tableArr.length\r\n            for (let subtract = rowLength - this.panel.numFour[0];subtract > 0;subtract--){\r\n                this.panel.tableArr.pop();\r\n            }\r\n        }\r\n        else if(this.panel.tableArr && this.panel.tableArr.length < this.panel.numFour[0]){//添加行\r\n            let rowLength = this.panel.tableArr.length;\r\n            for (let subtract = 1; this.panel.numFour[0]- rowLength - subtract >= 0;subtract++){\r\n                let subtractTableArr = new Array;\r\n                for (let row = 0; row < this.panel.numFour[1]; row++) {\r\n                    let tempArr = new Array;\r\n                    tempArr = {\r\n                        id: rowLength + subtract + \"-\" + (row + 1),\r\n                        target:\"-\",\r\n                        text: \"-\",\r\n                        fontsize: \"100%\",\r\n                        isAlertValue: false,\r\n                        alertValue1: 0,\r\n                        alertValue2: 10,\r\n                        displayMode: \"text\",\r\n                        count: rowLength * this.panel.numFour[1] + row,\r\n                        color: \"\"\r\n                    };\r\n                    subtractTableArr.push(tempArr)\r\n                }\r\n                this.panel.tableArr.push(subtractTableArr);\r\n            }\r\n        }\r\n        else if(this.panel.tableArr && this.panel.tableArr[0].length > this.panel.numFour[1]){//删除列\r\n            let columnLength = this.panel.tableArr[0].length;\r\n            for(let subtract = 0;columnLength - this.panel.numFour[1] - subtract > 0;subtract++){\r\n                for(let column = 0;column < this.panel.tableArr.length;column++){\r\n                    this.panel.tableArr[column].pop();\r\n                }\r\n            }\r\n        }\r\n        else if(this.panel.tableArr && this.panel.tableArr[0].length < this.panel.numFour[1]){//添加列\r\n            let columnLength = this.panel.tableArr[0].length;\r\n            for(let column = 0;column < this.panel.tableArr.length;column++){\r\n                for(let subtract = 0;this.panel.numFour[1] - columnLength -subtract > 0;subtract++){\r\n                    var subtractTableArr = new Array;\r\n                    if( column == 0){\r\n                        subtractTableArr = {\r\n                            id: 1 + \"-\" + (columnLength + subtract + 1),\r\n                            text: \"\",\r\n                            colWidth: '20%',\r\n                            displayMode: \"text\",\r\n                            count: columnLength + subtract\r\n                        }\r\n\r\n                        this.panel.tableArr[column].push(subtractTableArr);\r\n                    }\r\n                    else{\r\n                        subtractTableArr = {\r\n                            id: column + 1 + \"-\" + (columnLength + subtract + 1),\r\n                            target:\"-\",\r\n                            text: \"-\",\r\n                            fontsize: \"100%\",\r\n                            isAlertValue: false,\r\n                            alertValue1: 0,\r\n                            alertValue2: 10,\r\n                            displayMode: \"text\",\r\n                            count: column * columnLength + columnLength + subtract + 1,\r\n                            color: \"\"\r\n                        };\r\n                        this.panel.tableArr[column].push(subtractTableArr);\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n        else{\r\n            var tableArr = new Array();\r\n            for (let column = 0; column < this.panel.numFour[0]; column++) {\r\n                tableArr[column] = new Array();\r\n                for (let row = 0; row < this.panel.numFour[1]; row++) { //填充标题列属性\r\n                    let tableArrVal = this.panel.tableArr&&this.panel.tableArr[column]&&this.panel.tableArr[column][row]?this.panel.tableArr[column][row]:false;\r\n                    if (column === 0) {\r\n                        tableArr[column][row] = {\r\n                            id: column + 1 + \"-\" + (row + 1),\r\n                            text: tableArrVal?tableArrVal.text:\"\",\r\n                            colWidth: tableArrVal?tableArrVal.colWidth:'20%',\r\n                            displayMode: tableArrVal?tableArrVal.displayMode:\"text\",\r\n                            count: column * this.panel.numFour[1] + row,\r\n                            link:tableArrVal?tableArrVal.link:{}\r\n                        };\r\n                    } else {\r\n                        let bool = tableArrVal && (tableArrVal.displayMode=='value'|| tableArrVal.displayMode=='time');\r\n                        if (bool) {\r\n                            for (let i=0; i<this.panel.dataAndRefId.length;i++){\r\n                                if (tableArrVal.target === this.panel.dataAndRefId[i].target){\r\n                                    tableArrVal.text = tableArrVal.displayMode=='time'?this.panel.dataAndRefId[i].time:this.panel.dataAndRefId[i].value;\r\n                                    tableArrVal.color = this.panel.dataAndRefId[i].color;\r\n                                }\r\n                            }\r\n                        }\r\n                        tableArr[column][row] = { //填充单元格属性\r\n                            id: column + 1 + \"-\" + (row + 1),\r\n                            target:tableArrVal?tableArrVal.target:\"-\",\r\n                            text: tableArrVal?tableArrVal.text:\"-\",\r\n                            fontsize: tableArrVal?tableArrVal.fontsize:\"100%\",\r\n                            isAlertValue: tableArrVal?tableArrVal.isAlertValue:false,\r\n                            alertValue1: tableArrVal?tableArrVal.alertValue1:0,\r\n                            alertValue2: tableArrVal?tableArrVal.alertValue2:10,\r\n                            displayMode: tableArrVal?tableArrVal.displayMode:\"text\",\r\n                            count: column * this.panel.numFour[1] + row,\r\n                            color: tableArrVal?tableArrVal.color:\"\",\r\n                            link:tableArrVal?tableArrVal.link:{}\r\n                        };\r\n                    }\r\n                }\r\n            }\r\n            this.panel.tableArr = tableArr;\r\n        }\r\n    }\r\n\r\n    getdataAndRefId() {//获取value/name/color，并为target做了标识\r\n        this.panel.dataAndRefId = [];\r\n        if (this.data && this.data.length>0) {\r\n            for (let length = 0; length < this.data.length; length++) {\r\n                if (this.data[length].alarm && this.data[length].alarm.level!==undefined){\r\n                    let color = this.getAlertLevelColor(this.data[length].alarm.level);\r\n                    var dataAndRefIdOptions = {\r\n                        target: \"/\" + this.data[length].target,\r\n                        name: this.data[length].target,\r\n                        value: this.data[length].value,\r\n                        time: this.data[length].time?this.data[length].time:'-',\r\n                        color: color\r\n                    };\r\n                    this.panel.dataAndRefId.push(dataAndRefIdOptions);\r\n                } else {\r\n                    var dataAndRefIdOptions = {\r\n                        target: \"/\" + this.data[length].target,\r\n                        name: this.data[length].target,\r\n                        value: this.data[length].value,\r\n                        time: this.data[length].time?this.data[length].time:'-',\r\n                        color: ''\r\n                    }\r\n                    this.panel.dataAndRefId.push(dataAndRefIdOptions);\r\n                }\r\n            }\r\n        } else {\r\n            let dataSourceTargets = this.panel.targets;\r\n            for (let len = 0; length < dataSourceTargets.length; len++) {\r\n                var dataAndRefIdOptions = {\r\n                    target: \"/\" + (dataSourceTargets[len].targetName?dataSourceTargets[len].targetName:dataSourceTargets[len].targetCode),\r\n                    name: dataSourceTargets[len].targetName?dataSourceTargets[len].targetName:dataSourceTargets[len].targetCode,\r\n                    value: '',\r\n                    time:  '-',\r\n                    color: ''\r\n                }\r\n                this.panel.dataAndRefId.push(dataAndRefIdOptions);\r\n            }\r\n        }\r\n    }\r\n\r\n    changeDataShow(cell) {//当改变cell中的值时\r\n        if(cell && cell.id) {\r\n            let newArr = cell.id.split('-');\r\n            if(cell.displayMode=='value' || cell.displayMode=='time') {\r\n                for (let i=0; i<this.panel.dataAndRefId.length;i++){\r\n                    if (cell.target === this.panel.dataAndRefId[i].target){\r\n                        this.panel.tableArr[newArr[0]-1][newArr[1]-1].text = cell.displayMode=='value'?this.panel.dataAndRefId[i].value:this.panel.dataAndRefId[i].time;\r\n                        this.panel.tableArr[newArr[0]-1][newArr[1]-1].color = this.panel.dataAndRefId[i].color;\r\n                    }\r\n                }\r\n            } else {\r\n                this.panel.tableArr[newArr[0]-1][newArr[1]-1].text = cell.target;\r\n            }\r\n        }\r\n    }\r\n\r\n    changeDisplayMode(cell) {\r\n        if(cell && cell.id) {\r\n            let newArr = cell.id.split('-');\r\n            this.panel.tableArr[newArr[0]-1][newArr[1]-1].text = '-';\r\n            this.panel.tableArr[newArr[0]-1][newArr[1]-1].color = '';\r\n            cell.target = '-';\r\n        }\r\n    }\r\n\r\n    searchDashboards(queryStr, callback) {\r\n        that.backendSrv.search({\r\n            query: queryStr\r\n        }).then(function(hits) {\r\n            var dashboards = _.map(hits, function(dash) {\r\n                return dash.title;\r\n            });\r\n            callback(dashboards);\r\n        });\r\n    };\r\n    dashboardChanged(link) {\r\n        that.backendSrv.search({\r\n            query: link.dashboard\r\n        }).then(function(hits) {\r\n            var dashboard = _.find(hits, {\r\n                title: link.dashboard\r\n            });\r\n            if (dashboard) {\r\n                link.dashUri = dashboard.uri;\r\n                link.title = dashboard.title;\r\n            }\r\n        });\r\n    };\r\n    link(scope, elem, attrs, ctrl) {\r\n        ctrl.manualTableElem = elem;\r\n        ctrl.panelNewHeight = ctrl.height;\r\n    }\r\n}\r\n\r\nTimeRangeTableTableCtrl.templateUrl = 'module.html';\r\n"]}