{"version":3,"sources":["../src/graph_ctrl.js"],"names":["MetricsPanelCtrl","moment","_","TimeSeries","$","pageing","panelDefaults","mode","alarmColor","EchartsCtrl","$scope","$injector","$rootScope","defaults","panel","modeOption","name","value","events","on","onInitEditMode","bind","onDataReceived","addEditorTab","dataList","render","status","p","scope","elem","attrs","ctrl","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAQA,mB,kBAAAA,gB;;AACDC,S;;AACAC,I;;AACAC,a;;AAGAC,I;;AACAC,U;;;;;;;;;;;;;;;;;;;;;AAGHC,gB,GAAgB;AACnBC,UAAM,KADa,EACN;AACbC,gBAAW,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,CAFQ,CAEqC;AAFrC,I;;0BAKPC,W;;;AACX,yBAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,UAA/B,EAA2C;AAAA;;AAAA,2HACnCF,MADmC,EAC3BC,SAD2B;;AAE5C,WAAKC,UAAL,GAAkBA,UAAlB;;AAEAV,OAAEW,QAAF,CAAW,MAAKC,KAAhB,EAAuBR,aAAvB,EAJ4C,CAIL;AACvC,SAAIS,aAAa,CACZ,EAACC,MAAM,QAAP,EAAiBC,OAAO,KAAxB,EADY,EAEf,EAACD,MAAM,QAAP,EAAiBC,OAAO,UAAxB,EAFe,EAGf,EAACD,MAAM,QAAP,EAAiBC,OAAO,UAAxB,EAHe,EAIf,EAACD,MAAM,OAAP,EAAgBC,OAAO,SAAvB,EAJe,EAKf,EAACD,MAAM,OAAP,EAAgBC,OAAO,WAAvB,EALe,EAOf,EAACD,MAAM,MAAP,EAAeC,OAAO,WAAtB,EAPe,EAQf,EAACD,MAAM,QAAP,EAAiBC,OAAO,UAAxB,EARe,EAUf,EAACD,MAAM,QAAP,EAAiBC,OAAO,eAAxB,EAVe,EAWf,EAACD,MAAM,QAAP,EAAiBC,OAAO,gBAAxB,EAXe,EAYf,EAACD,MAAM,QAAP,EAAiBC,OAAO,eAAxB,EAZe,EAaf,EAACD,MAAM,QAAP,EAAiBC,OAAO,gBAAxB,EAbe,CAAjB;AAeA,WAAKH,KAAL,CAAWC,UAAX,GAAwBA,UAAxB;;AAEA,WAAKG,MAAL,CAAYC,EAAZ,CAAe,gBAAf,EAAiC,MAAKC,cAAL,CAAoBC,IAApB,OAAjC;AACA,WAAKH,MAAL,CAAYC,EAAZ,CAAe,eAAf,EAAgC,MAAKG,cAAL,CAAoBD,IAApB,OAAhC;AAvB4C;AAwB1C;;;;sCAEgB;AACf,WAAKE,YAAL,CAAkB,SAAlB,EAA6B,+CAA7B,EAA8E,CAA9E;AACD;;;oCAEcC,Q,EAAU;AAC1B,WAAKC,MAAL;AACE;;;gCAGS,CACT;;;8BAEQC,M,EAAQ;AAClB,UAAIC,IAAI,EAAR;AACA,UAAID,UAAU,CAAd,EAAiB;AAChBC,WAAI,KAAKb,KAAL,CAAWN,UAAX,CAAsBkB,MAAtB,CAAJ;AACA,OAFD,MAEK;AACJC,WAAI,EAAJ;AACA;AACD,aAAO,EAAC,oBAAoBA,CAArB,EAAP;AACE;;;0BAEIC,K,EAAOC,I,EAAMC,K,EAAOC,I,EAAM;AAChC1B,cAAQuB,KAAR,EAAeC,IAAf,EAAqBC,KAArB,EAA4BC,IAA5B;AACE;;;;KAnD8B/B,gB;;;;AAsDjCS,eAAYuB,WAAZ,GAA0B,aAA1B","file":"graph_ctrl.js","sourcesContent":["import {MetricsPanelCtrl} from 'app/plugins/sdk';\nimport moment from 'moment';\nimport _ from 'lodash';\nimport TimeSeries from 'app/core/time_series';\nimport './css/clock-panel.css!';\n\nimport $ from 'jquery';\nimport pageing from './pageing';\n\n\nvar panelDefaults = {\n\tmode: 'kpi', //默认显示模式\n\talarmColor:[\"#00ff00\", \"#00aa00\", \"#ffff00\", \"#ff0003\"] //告警颜色等级0-3\n};\n\nexport class EchartsCtrl extends MetricsPanelCtrl {\n  constructor($scope, $injector, $rootScope) {\n    super($scope, $injector);\n\tthis.$rootScope = $rootScope;\n\t\n\t_.defaults(this.panel, panelDefaults); //将panelDefaults属性附加到this.panel上\n\tvar modeOption = [\n      {name: 'KPI主信息', value: \"kpi\"},\n\t  {name: 'KPI仪表盘', value: \"kpiGauge\"},\n\t  {name: 'KPI趋势图', value: \"kpiTrend\"},\n\t  {name: 'KPI描述', value: \"kpiDesc\"},\n\t  {name: 'KPI链接', value: \"kpiWebUrl\"},\n\t  \n\t  {name: '告警信息', value: \"alarmInfo\"},\n\t  {name: '告警分布饼图', value: \"alarmPie\"},\n\t  \n\t  {name: '关联量信息1', value: \"relativeInfo1\"},\n\t  {name: '关联量趋势1', value: \"relativeTrend1\"},\n\t  {name: '关联量信息2', value: \"relativeInfo2\"},\n\t  {name: '关联量趋势2', value: \"relativeTrend2\"},\n    ];\n\tthis.panel.modeOption = modeOption;\n\t\n\tthis.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n\tthis.events.on('data-received', this.onDataReceived.bind(this));\n  }\n  \n  onInitEditMode() {\n    this.addEditorTab('Options', 'public/plugins/grafana-kdm-graphs/editor.html', 2);\n  }\n  \n  onDataReceived(dataList) {\n\tthis.render();\n  }\n  \n  //link中起到监听作用\n  onRender(){\n  }\n  \n  setColor(status) {\n\tvar p = \"\";\n\tif (status <= 3) {\n\t\tp = this.panel.alarmColor[status];\n\t}else{\n\t\tp = '';\n\t}\n\treturn {\"background-color\": p};\n  };\n \n  link(scope, elem, attrs, ctrl) {\n\tpageing(scope, elem, attrs, ctrl);\n  }\n}\n\nEchartsCtrl.templateUrl = 'module.html';\n"]}